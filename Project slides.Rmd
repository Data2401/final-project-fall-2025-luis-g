---
title: "Project Slides"
author: "Luis G"
date: "2025-11-17"
output: slidy_presentation

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include=FALSE}
library(dplyr)
library(tidyr)
library(stringr)
library(plotly)
library(maps)
library(mapview)
library(sf)
library(knitr)
```

# Introduction:

#### Source: NASA Open Data ('https://data.nasa.gov/dataset/meteorite-landings')
#### Every meteorite that reaches Earth carries a piece of our solar system’s history. NASA’s Meteorite Landings dataset compiles thousands of these discoveries. This dataset contains detailed records of over 45,000 meteorites that have been found or observed falling to Earth.

#### The dataset includes the following key variables:
- name: Official meteorite name
- id: Identification number from NASA
- nametype: “Valid” is a normal meteoroid. “Relict” is a weathered down meteoroid
- group: Combines related meteorite subclasses into their umbrella category
- class: Meteorite classification (e.g., H5, L6, CM2)
- mass (g): Mass of the meteorite in grams
- fall: “Fell” (observed fall) or “Found” later (not observed)
- year: The year it fell or was found
- origin: Where the meteorite originated from
- reclat / reclong: Latitude and longitude of discovery site
- type: The main group of which each meteorite is a part of
  - Stony: Outer crust of asteroids
  - Iron:	Cores of asteroids
  - Stony-Iron:	Core-mantle boundary	
  - Achondrite:	Melted
  - Unknown/other

***

#### Exploring this dataset gives us the chance to uncover patterns in how meteorites fall, what materials they contain, and what they reveal about the formation of planets.
```{r}
# LOAD N CLEANIG DATA

meteroite<- read.csv("~/Downloads/Data Science 1/Project/meteorite-landings.csv")
options(scipen = 999)

meteroite <- meteroite %>% 
  drop_na(mass) %>% 
  rename(class = recclass) %>% 
  mutate(
    type = case_when(
      str_starts(class, regex("I", ignore_case = TRUE)) ~ "Iron",
      str_starts(class, regex("P|M", ignore_case = TRUE)) ~ "Stony-Iron",
      str_starts(class, regex("A|U|E|Lun|Mar|D|Hed|How|Euc", ignore_case = TRUE)) ~ "Achondrite",
      str_starts(class, regex("H|L|C|R|E", ignore_case = TRUE)) ~ "Stony",
      TRUE ~ "Other/Unknown"), .before = 3) %>% 
  filter(year > 1800) %>% filter(year < 2025) %>% 
  mutate(
    reclat_original  = reclat,
    reclong_original = reclong
  ) %>% 
  mutate(
    reclat = case_when(
      reclat_original == 0 & reclong_original == 0 & str_starts(name, "Buckley Island")       ~ -84.96667,
      reclat_original == 0 & reclong_original == 0 & str_starts(name, "Dominion Range")       ~ -85.25000,
      reclat_original == 0 & reclong_original == 0 & str_starts(name, regex("LaPaz", TRUE))   ~ -86.36667,
      reclat_original == 0 & reclong_original == 0 & str_starts(name, "Larkman Nunatak")      ~ -86.76639,
      reclat_original == 0 & reclong_original == 0 & str_starts(name, "Miller Range")         ~ -83.25000,
      reclat_original == 0 & reclong_original == 0 & str_starts(name, "Patuxent Range")       ~ -85.07424,
      reclat_original == 0 & reclong_original == 0 & str_starts(name, regex("Yamato", 
                                                                            ignore_case = TRUE)) ~ -71.50000,
      TRUE ~ reclat_original
    ),
    reclong = case_when(
      reclat_original == 0 & reclong_original == 0 & str_starts(name, "Buckley Island")       ~ 163.93333,
      reclat_original == 0 & reclong_original == 0 & str_starts(name, "Dominion Range")       ~ 166.16667,
      reclat_original == 0 & reclong_original == 0 & str_starts(name, regex("LaPaz", TRUE))   ~ -70.00000,
      reclat_original == 0 & reclong_original == 0 & str_starts(name, "Larkman Nunatak")      ~ 179.33333,
      reclat_original == 0 & reclong_original == 0 & str_starts(name, "Miller Range")         ~ 157.00000,
      reclat_original == 0 & reclong_original == 0 & str_starts(name, "Patuxent Range")       ~ -64.46576,
      reclat_original == 0 & reclong_original == 0 & str_starts(name, regex("Yamato", 
                                                                            ignore_case = TRUE)) ~ 35.66667,
      TRUE ~ reclong_original
    )
  ) %>% 
  mutate(
    group = case_when(
      str_detect(class, regex("^Iron", ignore_case = TRUE)) ~ "Iron",
      str_detect(class, regex("^Pallasite", ignore_case = TRUE)) ~ "Pallasite",
      str_detect(class, regex("^Mesosiderite", ignore_case = TRUE)) ~ "Mesosiderite",
      str_detect(class, regex("^Martian", ignore_case = TRUE)) ~ "Martian",
      str_detect(class, regex("^Lunar", ignore_case = TRUE)) ~ "Lunar",
      str_detect(class, regex("Acapulcoite|Lodranite", ignore_case = TRUE)) ~ "Acapulcoite/Lodranite",
      str_detect(class, regex("Ureilite", ignore_case = TRUE)) ~ "Ureilite",
      str_detect(class, regex("Aubrite", ignore_case = TRUE)) ~ "Aubrite",
      str_detect(class, regex("Winonaite", ignore_case = TRUE)) ~ "Winonaite",
      str_detect(class, regex("Eucrite", ignore_case = TRUE)) ~ "Eucrite",
      str_detect(class, regex("Diogenite", ignore_case = TRUE)) ~ "Diogenite",
      str_detect(class, regex("Howardite", ignore_case = TRUE)) ~ "Howardite",
      str_detect(class, regex("^EH", ignore_case = TRUE)) ~ "EH",
      str_detect(class, regex("^EL", ignore_case = TRUE)) ~ "EL",
      str_detect(class, regex("^E$", ignore_case = TRUE))  ~ "E",
      str_detect(class, regex("^CI", ignore_case = TRUE)) ~ "CI",
      str_detect(class, regex("^CM", ignore_case = TRUE)) ~ "CM",
      str_detect(class, regex("^CO", ignore_case = TRUE)) ~ "CO",
      str_detect(class, regex("^CV", ignore_case = TRUE)) ~ "CV",
      str_detect(class, regex("^CK", ignore_case = TRUE)) ~ "CK",
      str_detect(class, regex("^CR", ignore_case = TRUE)) ~ "CR",
      str_detect(class, regex("^CB", ignore_case = TRUE)) ~ "CB",
      str_detect(class, regex("^CH", ignore_case = TRUE)) ~ "CH",
      str_detect(class, regex("^H", ignore_case = TRUE)) ~ "H",
      str_detect(class, regex("^L[^L]", ignore_case = TRUE)) ~ "L",
      str_detect(class, regex("^LL", ignore_case = TRUE)) ~ "LL",
      str_detect(class, regex("^R", ignore_case = TRUE)) ~ "R",
      str_detect(class, regex("^K", ignore_case = TRUE)) ~ "K",
      TRUE ~ "Other/Unknown"
    )
  ) %>%  mutate(
    origin = case_when(
      group == "Martian" ~ "Mars",
      group == "Lunar" ~ "Moon",
      group == "Iron" ~ "Asteroid Core",
      group %in% c("Pallasite", "Mesosiderite") ~ "Core–Mantle ",
      group %in% c("H","L","LL","CI","CM","CO","CV","CK","CR","CB","CH","R","K","E","EH","EL") ~ "Asteroid Belt",
      TRUE ~ "Unknown"
    )
  ) %>% 
  drop_na(reclat) %>% 
  select(name, id,nametype,type, group, class, mass, fall, year, reclat, reclong, origin)

kable(head(meteroite), caption = "Sample of Meteorite Dataset")

meteroite %>% 
  distinct(origin)
```

***

#### Tools:
- dplyr
- tidyr
- stringr
- plotly
- maps
- mapview
- sf
- knitr

***

## Where on Earth?!

#### Do most of the meteors land at?

```{r}
world <- map_data("world")

meteroite_map <- meteroite %>% 
  filter(
    !is.na(reclat),
    !is.na(reclong),
    reclat  >= -90, reclat <= 90,
    reclong >= -180, reclong <= 180)

meteroite_sf <- st_as_sf(
  meteroite_map,
  coords = c("reclong", "reclat"),
  crs    = 4326)

p_stony <- mapview(
  meteroite_sf[meteroite_sf$type == "Stony", ],
  col.regions = "red",
  layer.name  = "Stony")
p_iron <- mapview(
  meteroite_sf[meteroite_sf$type == "Iron", ],
  col.regions = "blue",
  layer.name  = "Iron")

p_ach <- mapview(
  meteroite_sf[meteroite_sf$type == "Achondrite", ],
  col.regions = "darkgrey",
  layer.name  = "Achondrite")

p_stonI <- mapview(
  meteroite_sf[meteroite_sf$type == "Stony-Iron", ],
  col.regions = "yellow",
  layer.name  = "Stony-Iron")

p_other <- mapview(
  meteroite_sf[meteroite_sf$type == "Other/Unknown", ],
  col.regions = "green",
  layer.name  = "Other/Unknown")
p_stony + p_iron + p_ach + p_other + p_stonI

```

This map shows thousands of recorded meteorite locations across the globe. In very remote regions such as the Amazon, Russian tundra, and north Canada, there are noticeably fewer points. This does not mean meteorites never land there, it just more likely shows how difficult those areas are to survey. We can start to guess where the “hot spots” of meteorite discoveries are, but with so many overlapping points it is hard to see patterns clearly, so we next look at a density view.

***

#### Density of the meteor landings

```{r}
ggplot() +
  geom_polygon(
    data = world,
    aes(x = long, y = lat, group = group),
    fill = "grey",
    color = "white"
  ) +
  stat_density_2d(
    data = meteroite_map,
    aes(x = reclong, y = reclat, fill = ..level.., alpha = ..level..),
    geom = "polygon",
    contour = TRUE,
    bins = 15) +
  scale_fill_viridis_c(option = "magma") +
  scale_alpha(range = c(.6, 1), guide = "none") +
  coord_fixed(1.3) +
  labs(
    title = "Density of Meteorite Landings",
    x = "Longitude",
    y = "Latitude",
    fill = "Density"
  ) +
  theme_dark()
```

The density heat map highlights clear hot spots where meteorites have been recorded. Notable locations include West Africa, Arabian Peninsula, and especially Antarctica. Meteorites are easier to recognize on bright ice and snow, and the cold, dry environment helps preserve them instead of letting them weather away. This combination of good preservation and high visibility, plus targeted searches, explains why Antarctica stands out so strongly in the data. 

#### Meteor Landing points by year

```{r}
ggplot() +
  geom_polygon( data = world, aes(x = long, y = lat, group = group), fill = "gray90", color = "white") +
  geom_point(data = meteroite_map, aes(x = reclong, y = reclat, color = year), alpha = 0.5, size = 0.9) +
  scale_color_gradientn(colors = rainbow(4)) + 
  coord_fixed(1.3) +
  labs(title = "Meteorite Landings by Year", x = "Longitude", y = "Latitude", color = "Year") + 
  theme_dark()
```

Coloring the points by year shows that many of the discoveries come from more recent decades, lining up with modern advances in mapping, GPS, and technology. When we combine this with the density map, we see that Antarctica has become a major focus in recent years, likely because technology makes it easier to plan field campaigns in remote ice fields. The polar environment also preserves meteorites that would otherwise be buried, eroded, or lost in more weathered landscapes.

***

## Are most meteors found or seen falling?

```{r}
meteroite %>% 
  ggplot(aes(x = year, fill = fall)) + geom_density(alpha = .8)+
  labs(title = "Are Most Meteorites Found or Seen Falling?") +
  theme_minimal()
```

The density curves by fall status suggest that most meteorites in this dataset are labeled “Found” rather than “Fell.” In other words, the majority were discovered on the ground after the fact, not observed falling in real time. This fits our earlier observations, as technology and searches improve, we are getting better at finding meteorites that would have been missed in the past, even if we never saw them fall.

## Which year are most types of meteorites found by year


```{r}
meteroite %>% 
  ggplot(aes(x = year, fill = type)) + geom_density(alpha = .6)+
  labs(title = "Densities of meteor types") + theme_minimal()
```

We see that most meteors found in recent years are of the stony and stony-iron type. This is because before modern advances stony meteorites can look very similar to ordinary rocks, so modern tools and classification methods are especially important for recognizing which samples are from Earth or out of this world

***

## Total counts

```{r}
meteroite %>% 
  ggplot(aes(x = type, fill = type)) + geom_bar() + labs(title = "Total Count by Types")

```

```{r}
meteroite %>% 
  ggplot(aes( x = reorder(origin, table(origin)[origin]), fill = origin)) + geom_bar() + coord_flip() +
  labs( x = "Meteor Origin", title = "Total Count by Origin")

```

Most meteorites in this dataset are classified as coming from the asteroid belt, which makes sense because it is one of the most dense region of small rocky bodies in our solar system. Many of these objects follow or evolve into Earth crossing orbits, and a fraction eventually reach the surface as meteorites. Since the majority of these belt meteorites are stony, it is reasonable to conclude that asteroid belt material reaching Earth is dominated by stony compositions rather than metal rich cores or rare planetary fragments

```{r}
meteroite %>% 
  ggplot(aes(x = origin, fill = type)) + geom_bar(position =  'dodge') + labs(title = "Total Count by Types")

```


***

## Northern or Southern? 

#### Here we look at which hemisphere has found the greater amount of meteorites
```{r}
meteroite <- meteroite %>%
  mutate(
    hemisphere = case_when(
      reclat > 0  ~ "Northern Hemisphere",
      reclat < 0  ~ "Southern Hemisphere",
      reclat == 0 ~ "Equator"))

hemi <- meteroite %>% 
  drop_na(hemisphere) %>% 
  count(hemisphere) %>%
  mutate(
    pct = n / sum(n) * 100,
    pct_label = paste0(round(pct, 1), "%")
  )

ggplot(hemi , aes(x = "", y = pct, fill = hemisphere)) +
  geom_col(width = 1, color = "white") +
  coord_polar(theta = "y") +
  geom_text(
    aes(label = pct_label),
    position = position_stack(vjust = 0.5)
  ) +
  labs(
    title = "Meteors by hemisphere",
    fill = "Hemisphere"
  ) +
  theme_void()
```

The pie chart shows that the Southern Hemisphere holds the majority of recorded meteorites, with a large contribution coming from finds in Antarctica. This does not mean more meteorites actually fall in the south, but instead it reflects a detection bias. Searches on the Antarctic ice sheet make it much easier to spot and preserve meteorites there compared to foresty or populated regions


```{r}
meteroite %>%
  ggplot(aes(x = type, fill = hemisphere)) +
  geom_bar(position = "dodge") +
  labs(
    title = "Meteorite Types by Hemisphere",
    x = "Meteorite Type",
    y = "Count",
    fill = "Hemisphere"
  ) +
  theme_minimal()
```

However, the Northern Hemisphere contributes a relatively larger share of iron meteorites. This may reflect different search strategies and environments: metal meteorites are easier to recognize and recover in populated or agricultural area.

***

## Mass

```{r}
meteroite %>%
  group_by(type) %>%
  summarize(median_mass = median(mass, na.rm = TRUE)) %>%
  mutate(type = reorder(type, median_mass)) %>%
  ggplot(aes(x = type, y = median_mass, fill = type)) +
  geom_col() +
  coord_flip() +
  labs(
    title = "Median mass by types",
    x = "Type",
    y = "Median mass (g)"
  )
```

The median mass shows that iron meteorites tend to be heavier than the other types. This fits with their physical properties of being dense, metal rich objects are more likely to survive burning through the atmosphere and reach the ground as larger pieces. Their durability and distinctive metallic-ness also make them easier to recognize and collect once they are on the surface.

```{r}
meteroite %>% ggplot(aes(x = type, y = log(mass), fill = origin)) + geom_boxplot() + labs(y = "log of Mass", title = "log Mass of Types by Origin")
```

Taking the log of mass compresses the wide range of meteorite sizes into a more manageable scale. This transformation makes it easier to compare the typical mass ranges of different types and to see patterns among smaller meteorites that would be hard to distinguish on a raw mass scale dominated by a few very large objects.

***

## World map by origins

```{r}
world <- map_data("world")

meteroite_map <- meteroite %>% 
  filter(
    !is.na(reclat),
    !is.na(reclong),
    reclat  >= -90, reclat <= 90,
    reclong >= -180, reclong <= 180
  )

meteroite_sf <- st_as_sf(
  meteroite_map,
  coords = c("reclong", "reclat"),
  crs    = 4326
)

p_belt<- mapview(
  meteroite_sf[meteroite_sf$origin == "Asteroid Belt", ],
  col.regions = "red",
  layer.name  = "Asteroid Belt"
)
p_core <- mapview(
  meteroite_sf[meteroite_sf$origin == "Asteroid Core", ],
  col.regions = "blue",
  layer.name  = "Asteroid Core")
p_core_mant <- mapview(
  meteroite_sf[meteroite_sf$origin == "Core–Mantle ", ],
  col.regions = "magenta",
  layer.name  = "Core–Mantle")
p_mars <- mapview(
  meteroite_sf[meteroite_sf$origin == "Mars", ],
  col.regions = "yellow",
  layer.name  = "Mars")
p_moon <- mapview(
  meteroite_sf[meteroite_sf$origin == "Moon", ],
  col.regions = "green",
  layer.name  = "Moon")
p_unk <- mapview(
  meteroite_sf[meteroite_sf$origin == "Unknown", ],
  col.regions = "gray",
  layer.name  = "Unknown")

p_belt + p_core + p_core_mant + p_mars + p_moon + p_unk


```

The origin map confirms that almost all recorded meteorites come from asteroid belt sources or related asteroid interiors, while fragments from the Moon and Mars appear as only a few isolated points. Lunar and Martian meteorites are extremely rare, so it is expected that they form only a tiny fraction of the global distribution compared to the many stony meteorites arriving from ordinary asteroids

***

## Ratio of land mass to meteors found 

```{r}
land <- 0.29
ocean <- 0.71
land_meteors <- meteroite %>% 
  nrow()
estimated_ocean <- land_meteors * (ocean / land)
result <- tibble(
  Region = c("Land (Found)", "Ocean (Estimated)"),
  Meteorites = c(land_meteors, round(estimated_ocean)))
kable(result, caption = "Estimated Ocean Meteorites vs Found Land Meteorites")
ggplot(result, aes(x = Region, y = Meteorites, fill = Region)) + geom_col() +
  coord_flip() +
  labs(title = "Estimated Meteorites in the Ocean vs Found on Land", y = "Meteorite Count") +
  theme_minimal() 

```

Because land makes up only about 29% of Earth’s surface but almost all meteorite finds come from land, we can use a  proportional estimate to estimate how many meteorites likely fell into the ocean (at least). Under the assumption that meteorites fall roughly uniformly over Earth’s surface, the number that landed in the ocean should be several times larger than the number we have found on land, suggesting that most meteorites that reach Earth are still hidden underwater and never recovered.

***

## The biggest meteor found so far

![](/Users/luis/Downloads/Hoba-Intro.jpg)


```{r}
kable(meteroite %>% 
  slice_max(mass))
```

